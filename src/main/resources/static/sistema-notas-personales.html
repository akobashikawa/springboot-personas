<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sistema de Notas Personales</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        [v-cloak]>* {
            display: none
        }

        [v-cloak]::before {
            content: "cargandoâ€¦"
        }
    </style>
</head>

<body>
    <div id="app" class="container" v-cloak>
        <h1>Sistema de Notas Personales</h1>

        <div class="registro" v-if="!showLogin">
            <h2>Registro</h2>

            <input type="text" class="form-control" placeholder="Email" v-model="email">
            <input type="text" class="form-control" placeholder="Password" v-model="password">
            <input type="text" class="form-control" placeholder="Nombre" v-model="nombre">

            <p>
                <button class="btn btn-primary mt-2" @click="registrar">Registrar</button>
                <button class="btn btn-light mt-2" @click="showLogin=true">Ya estoy registrado</button>
            </p>
        </div>

        <div class="login" v-if="showLogin">
            <h2>Login</h2>

            <input type="text" class="form-control" placeholder="Email" v-model="email">
            <input type="text" class="form-control" placeholder="Password" v-model="password">

            <p>
                <button class="btn btn-primary mt-2" @click="login">Login</button>
                <button class="btn btn-light mt-2" @click="showLogin=false">No estoy registrado</button>
            </p>
        </div>


    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    email: '',
                    password: '',
                    nombre: '',

                    showLogin: false,

                    error: '',
                };
            },

            computed: {
                
            },

            methods: {
                async registrar() {
                    const url = '/registro-usuario';
                    const body = {
                        email: this.email,
                        password: this.password,
                        nombre: this.nombre,
                    };

                    try {
                        this.error = '';
                        const response = await axios.post(url, body);
                        this.nuevoUsuario = response.data;
                        
                    } catch (error) {
                        this.error = 'Error: ' + error;
                        this.nuevoUsuario = null;
                    }
                },
                
            },


            mounted() {
                
            },

        }).mount('#app');  
    </script>

</body>

</html>